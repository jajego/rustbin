import"../chunks/DsnmJJEf.js";import{i as ct}from"../chunks/BtUMfmAO.js";import{o as bt,e as D,s as b}from"../chunks/DNjhJAR4.js";import{i as Se,p as mt,f as k,t as N,b as d,c as pt,g as r,d as t,e as l,m as I,s as g,a7 as kt,r as e,a3 as oe,a as ie,a8 as ut,a9 as ft,aa as wt}from"../chunks/Cix4TZdQ.js";import{i as T}from"../chunks/aYuDAdqV.js";import{p as ht,e as Ue,i as gt}from"../chunks/B2rMTG9H.js";import{g as xt}from"../chunks/D4ryp0Ci.js";function yt(y,S,x){var i=y==null?"":""+y;return i=i?i+" "+S:S,i===""?null:i}function ne(y,S,x,i,A,U){var j=y.__className;if(Se||j!==x||j===void 0){var M=yt(x,i);(!Se||M!==y.getAttribute("class"))&&(M==null?y.removeAttribute("class"):y.className=M),y.__className=x}return U}var jt=k('<div class="text-center py-12 fallback-empty svelte-bqtjkw"><div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-lg flex items-center justify-center fallback-empty-icon svelte-bqtjkw"><svg class="w-8 h-8 text-blue-600 animate-spin svelte-bqtjkw" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-bqtjkw" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-bqtjkw" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2 svelte-bqtjkw">Loading requests...</h3> <p class="text-gray-600 text-sm max-w-md mx-auto svelte-bqtjkw">Fetching existing requests for this bin...</p></div>'),qt=k(`<div class="text-center py-12 fallback-empty svelte-bqtjkw"><div class="w-16 h-16 mx-auto mb-4 bg-yellow-100 rounded-lg flex items-center justify-center fallback-empty-icon svelte-bqtjkw"><svg class="w-8 h-8 text-yellow-600 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m6 5H3a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2z" class="svelte-bqtjkw"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2 svelte-bqtjkw">Bin Not Found</h3> <p class="text-gray-600 text-sm max-w-md mx-auto mb-4 svelte-bqtjkw">The bin with ID <code class="bg-gray-100 px-1 py-0.5 rounded text-xs font-mono svelte-bqtjkw"> </code> doesn't exist.</p> <p class="text-gray-500 text-xs max-w-md mx-auto mb-4 svelte-bqtjkw">It may have been deleted or you might have an incorrect URL.</p> <div class="flex gap-2 justify-center svelte-bqtjkw"><button class="px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md font-medium transition-colors fallback-button svelte-bqtjkw">Create New Bin</button> <button class="px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded-md font-medium transition-colors fallback-button svelte-bqtjkw">Try Again</button></div></div>`),_t=k('<div class="text-center py-12 fallback-empty svelte-bqtjkw"><div class="w-16 h-16 mx-auto mb-4 bg-red-100 rounded-lg flex items-center justify-center fallback-empty-icon svelte-bqtjkw"><svg class="w-8 h-8 text-red-600 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.958-.833-2.728 0L4.088 16.5c-.77.833.192 2.5 1.732 2.5z" class="svelte-bqtjkw"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2 svelte-bqtjkw">Failed to load requests</h3> <p class="text-gray-600 text-sm max-w-md mx-auto mb-4 svelte-bqtjkw"> </p> <button class="px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md font-medium transition-colors fallback-button svelte-bqtjkw">Try Again</button></div>'),Ct=k('<div class="text-center py-12 fallback-empty svelte-bqtjkw"><div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-lg flex items-center justify-center fallback-empty-icon svelte-bqtjkw"><svg class="w-8 h-8 text-gray-400 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" class="svelte-bqtjkw"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2 svelte-bqtjkw">Waiting for requests...</h3> <p class="text-gray-600 text-sm max-w-md mx-auto svelte-bqtjkw">Send HTTP requests to your bin endpoint to see them appear here.</p></div>'),At=k('<span class="flex items-center svelte-bqtjkw"><svg class="w-3 h-3 mr-1 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9" class="svelte-bqtjkw"></path></svg> </span>'),Mt=k('<div class="flex fallback-header-item svelte-bqtjkw"><span class="font-medium text-gray-700 min-w-0 flex-shrink-0 fallback-header-key svelte-bqtjkw"> </span> <span class="text-gray-600 ml-2 break-all fallback-header-value svelte-bqtjkw"> </span></div>'),Nt=k('<div class="space-y-1 svelte-bqtjkw"></div>'),Tt=k('<p class="text-gray-500 italic fallback-empty-text svelte-bqtjkw">No headers</p>'),Bt=k('<pre class="text-xs text-gray-700 whitespace-pre-wrap break-all font-mono fallback-body-content svelte-bqtjkw"> </pre>'),Lt=k('<p class="text-xs text-gray-500 italic fallback-empty-text svelte-bqtjkw">No body content</p>'),zt=k('<div class="mt-3 pt-3 border-t svelte-bqtjkw"><h4 class="text-sm font-medium text-gray-900 mb-1 flex items-center fallback-section-title svelte-bqtjkw"><svg class="w-3 h-3 mr-1 text-gray-500 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" class="svelte-bqtjkw"></path></svg> User Agent</h4> <p class="text-xs text-gray-600 bg-gray-50 rounded-md p-2 break-all font-mono fallback-body-content svelte-bqtjkw"> </p></div>'),St=k('<div class="bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow fallback-request-card svelte-bqtjkw"><div class="px-4 py-3 border-b bg-gray-50 rounded-t-lg fallback-request-header svelte-bqtjkw"><div class="flex items-center justify-between svelte-bqtjkw"><div class="flex items-center space-x-3 fallback-request-info svelte-bqtjkw"><span> </span> <code class="text-sm font-mono text-gray-700 bg-white px-2 py-1 rounded border fallback-path svelte-bqtjkw"> </code></div> <div class="flex items-center space-x-3 text-xs text-gray-500 fallback-request-meta svelte-bqtjkw"><!> <span class="flex items-center svelte-bqtjkw"><svg class="w-3 h-3 mr-1 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-bqtjkw"></path></svg> </span></div></div></div> <div class="p-4 fallback-request-body svelte-bqtjkw"><div class="grid md:grid-cols-2 gap-4 svelte-bqtjkw"><div class="svelte-bqtjkw"><h4 class="text-sm font-medium text-gray-900 mb-2 flex items-center fallback-section-title svelte-bqtjkw"><svg class="w-3 h-3 mr-1 text-gray-500 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-bqtjkw"></path></svg> Headers</h4> <div class="bg-gray-50 rounded-md p-2 max-h-32 overflow-y-auto text-xs fallback-section svelte-bqtjkw"><!></div></div> <div class="svelte-bqtjkw"><h4 class="text-sm font-medium text-gray-900 mb-2 flex items-center fallback-section-title svelte-bqtjkw"><svg class="w-3 h-3 mr-1 text-gray-500 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-bqtjkw"></path></svg> Body</h4> <div class="bg-gray-50 rounded-md p-2 max-h-32 overflow-y-auto fallback-section svelte-bqtjkw"><!></div></div></div> <!></div></div>'),Ut=k('<div class="space-y-4 fallback-requests svelte-bqtjkw"></div>'),Ht=k('<div class="min-h-screen bg-gray-50 fallback-container svelte-bqtjkw"><div class="max-w-7xl mx-auto px-4 py-6 fallback-wrapper svelte-bqtjkw"><div class="flex items-center justify-between mb-6 fallback-header svelte-bqtjkw"><div class="flex items-center space-x-3 fallback-title svelte-bqtjkw"><div></div> <h1 class="text-2xl font-bold text-gray-900 svelte-bqtjkw">Request Bin <span class="text-blue-600 svelte-bqtjkw"> </span></h1> <span class="text-sm text-gray-500 svelte-bqtjkw"> </span></div> <button class="px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm rounded-md font-medium transition-colors fallback-button svelte-bqtjkw">Clear All</button></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 fallback-stats svelte-bqtjkw"><div class="bg-white rounded-lg shadow-sm border p-4 fallback-stat-card svelte-bqtjkw"><div class="flex items-center fallback-stat-header svelte-bqtjkw"><div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center fallback-icon svelte-bqtjkw"><svg class="w-4 h-4 text-blue-600 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" class="svelte-bqtjkw"></path></svg></div> <div class="ml-3 svelte-bqtjkw"><p class="text-xs text-gray-600 fallback-stat-label svelte-bqtjkw">Total Requests</p> <p class="text-lg font-semibold text-gray-900 fallback-stat-value svelte-bqtjkw"> </p></div></div></div> <div class="bg-white rounded-lg shadow-sm border p-4 fallback-stat-card svelte-bqtjkw"><div class="flex items-center fallback-stat-header svelte-bqtjkw"><div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center fallback-icon svelte-bqtjkw"><svg class="w-4 h-4 text-green-600 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-bqtjkw"></path></svg></div> <div class="ml-3 svelte-bqtjkw"><p class="text-xs text-gray-600 fallback-stat-label svelte-bqtjkw">Status</p> <p> </p></div></div></div> <div class="bg-white rounded-lg shadow-sm border p-4 fallback-stat-card svelte-bqtjkw"><div class="flex items-center fallback-stat-header svelte-bqtjkw"><div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center fallback-icon svelte-bqtjkw"><svg class="w-4 h-4 text-gray-600 svelte-bqtjkw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-bqtjkw"></path></svg></div> <div class="ml-3 svelte-bqtjkw"><p class="text-xs text-gray-600 fallback-stat-label svelte-bqtjkw">Last Request</p> <p class="text-sm font-semibold text-gray-900 fallback-stat-value svelte-bqtjkw"> </p></div></div></div></div> <!></div></div>');function Vt(y,S){mt(S,!1);let x=null,i=I([]),A=I(!1),U=I(!0),j=I(null);const M=xt(ht).params.id;function He(a){let s={};try{a.headers&&(s=JSON.parse(a.headers))}catch{s={raw:a.headers}}return{id:a.request_id,method:a.method,path:s.path||s.url||"/",headers:s,body:a.body||"",timestamp:new Date(a.timestamp),ip:s["x-forwarded-for"]||s["x-real-ip"],userAgent:s["user-agent"]}}async function E(){try{g(U,!0),g(j,null);const a=await fetch(`https://api.rustb.in/bin/${M}/inspect`);if(a.status===404){g(j,"bin-not-found");return}if(!a.ok)throw new Error(`Failed to fetch requests: ${a.status} ${a.statusText}`);const c=(await a.json()).map(He).sort((m,_)=>_.timestamp.getTime()-m.timestamp.getTime());g(i,c)}catch(a){console.error("Failed to fetch existing requests:",a),g(j,a instanceof Error?a.message:"Failed to load requests")}finally{g(U,!1)}}function Oe(a){try{const s=JSON.parse(a);let c={};if(s.headers)if(typeof s.headers=="string")try{c=JSON.parse(s.headers)}catch{c={raw:s.headers}}else if(Array.isArray(s.headers)){c={};for(let m=0;m<s.headers.length;m+=2)s.headers[m]&&s.headers[m+1]&&(c[s.headers[m]]=s.headers[m+1])}else typeof s.headers=="object"&&(c=s.headers);return{id:crypto.randomUUID(),method:s.method||"UNKNOWN",path:s.path||s.url||"/",headers:c,body:s.body||"",timestamp:new Date,ip:s.ip||s.remote_addr,userAgent:c["user-agent"]||c["User-Agent"]}}catch{const s=a.split(`
`),c=s[0]||"",[m,_]=c.split(" "),v={};let u=-1;for(let f=1;f<s.length;f++){if(s[f].trim()===""){u=f+1;break}const B=s[f].indexOf(":");if(B>0){const w=s[f].substring(0,B).trim(),h=s[f].substring(B+1).trim();w&&h&&(v[w]=h)}}const C=u>-1?s.slice(u).join(`
`):"";return{id:crypto.randomUUID(),method:m||"UNKNOWN",path:_||"/",headers:v,body:C,timestamp:new Date,ip:v["X-Forwarded-For"]||v["X-Real-IP"],userAgent:v["User-Agent"]}}}function De(a){return{GET:"bg-green-100 text-green-800 border-green-200",POST:"bg-blue-100 text-blue-800 border-blue-200",PUT:"bg-yellow-100 text-yellow-800 border-yellow-200",PATCH:"bg-orange-100 text-orange-800 border-orange-200",DELETE:"bg-red-100 text-red-800 border-red-200",OPTIONS:"bg-purple-100 text-purple-800 border-purple-200",HEAD:"bg-gray-100 text-gray-800 border-gray-200"}[a]||"bg-gray-100 text-gray-800 border-gray-200"}function de(a){return a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Ie(){g(i,[])}bt(()=>{let a;return(async()=>{if(await E(),r(j)==="bin-not-found")return;const m=`${location.protocol==="https:"?"wss":"ws"}://api.rustb.in/bin/${M}/ws`;x=new WebSocket(m),x.onopen=()=>{g(A,!0)},x.onmessage=_=>{const v=Oe(_.data),u=r(i).findIndex(C=>C.id===v.id);u===-1?g(i,[v,...r(i)]):(kt(i,r(i)[u]=v),g(i,r(i)))},x.onerror=_=>{console.error("WebSocket error:",_),g(A,!1)},x.onclose=()=>{console.log("WebSocket closed"),g(A,!1)},a=()=>{x?.close()}})(),()=>{a?.()}}),ct();var F=Ht(),ve=t(F),P=t(ve),R=t(P),ce=t(R),V=l(ce,2),be=l(t(V)),Ee=t(be);e(be),e(V);var me=l(V,2),Fe=t(me,!0);e(me),e(R);var Pe=l(R,2);e(P);var W=l(P,2),$=t(W),pe=t($),ke=l(t(pe),2),ue=l(t(ke),2),Re=t(ue,!0);e(ue),e(ke),e(pe),e($);var J=l($,2),fe=t(J),we=l(t(fe),2),K=l(t(we),2),Ve=t(K,!0);e(K),e(we),e(fe),e(J);var he=l(J,2),ge=t(he),xe=l(t(ge),2),ye=l(t(xe),2),We=t(ye,!0);e(ye),e(xe),e(ge),e(he),e(W);var $e=l(W,2);{var Je=a=>{var s=jt();d(a,s)},Ke=a=>{var s=oe(),c=ie(s);{var m=v=>{var u=qt(),C=l(t(u),4),f=l(t(C)),B=t(f,!0);e(f),ut(),e(C);var w=l(C,4),h=t(w),L=l(h,2);e(w),e(u),N(()=>b(B,M)),D("click",h,()=>window.location.href="/"),D("click",L,E),d(v,u)},_=v=>{var u=oe(),C=ie(u);{var f=w=>{var h=_t(),L=l(t(h),4),X=t(L,!0);e(L);var G=l(L,2);e(h),N(()=>b(X,r(j))),D("click",G,E),d(w,h)},B=w=>{var h=oe(),L=ie(h);{var X=z=>{var H=Ct();d(z,H)},G=z=>{var H=Ut();Ue(H,5,()=>r(i),Q=>Q.id,(Q,p)=>{var Y=St(),Z=t(Y),je=t(Z),ee=t(je),O=t(ee),Xe=t(O,!0);e(O);var qe=l(O,2),Ge=t(qe,!0);e(qe),e(ee);var _e=l(ee,2),Ce=t(_e);{var Qe=o=>{var n=At(),q=l(t(n));e(n),N(()=>b(q,` ${r(p).ip??""}`)),d(o,n)};T(Ce,o=>{r(p).ip&&o(Qe)})}var Ae=l(Ce,2),Ye=l(t(Ae));e(Ae),e(_e),e(je),e(Z);var Me=l(Z,2),te=t(Me),se=t(te),Ne=l(t(se),2),Ze=t(Ne);{var et=o=>{var n=Nt();Ue(n,5,()=>Object.entries(r(p).headers),gt,(q,ae)=>{var Le=ft(()=>wt(r(ae),2));let it=()=>r(Le)[0],nt=()=>r(Le)[1];var re=Mt(),le=t(re),dt=t(le);e(le);var ze=l(le,2),vt=t(ze,!0);e(ze),e(re),N(()=>{b(dt,`${it()??""}:`),b(vt,nt())}),d(q,re)}),e(n),d(o,n)},tt=o=>{var n=Tt();d(o,n)};T(Ze,o=>{Object.keys(r(p).headers).length>0?o(et):o(tt,!1)})}e(Ne),e(se);var Te=l(se,2),Be=l(t(Te),2),st=t(Be);{var at=o=>{var n=Bt(),q=t(n,!0);e(n),N(()=>b(q,r(p).body)),d(o,n)},rt=o=>{var n=Lt();d(o,n)};T(st,o=>{r(p).body.trim()?o(at):o(rt,!1)})}e(Be),e(Te),e(te);var lt=l(te,2);{var ot=o=>{var n=zt(),q=l(t(n),2),ae=t(q,!0);e(q),e(n),N(()=>b(ae,r(p).userAgent)),d(o,n)};T(lt,o=>{r(p).userAgent&&o(ot)})}e(Me),e(Y),N((o,n,q)=>{ne(O,1,`px-2 py-1 text-xs font-medium rounded-md fallback-method-badge ${o??""} ${n??""}`,"svelte-bqtjkw"),b(Xe,r(p).method),b(Ge,r(p).path),b(Ye,` ${q??""}`)},[()=>r(p).method.toLowerCase()==="get"?"fallback-method-get":r(p).method.toLowerCase()==="post"?"fallback-method-post":"fallback-method-default",()=>De(r(p).method),()=>de(r(p).timestamp)]),d(Q,Y)}),e(H),d(z,H)};T(L,z=>{r(i).length===0?z(X):z(G,!1)},!0)}d(w,h)};T(C,w=>{r(j)?w(f):w(B,!1)},!0)}d(v,u)};T(c,v=>{r(j)==="bin-not-found"?v(m):v(_,!1)},!0)}d(a,s)};T($e,a=>{r(U)?a(Je):a(Ke,!1)})}e(ve),e(F),N(a=>{ne(ce,1,`w-2 h-2 rounded-full fallback-status-dot ${r(A)?"bg-green-500 animate-pulse connected":"bg-red-500"}`,"svelte-bqtjkw"),b(Ee,`#${M??""}`),b(Fe,r(A)?"Connected":"Disconnected"),b(Re,r(i).length),ne(K,1,`text-lg font-semibold fallback-stat-value ${r(A)?"text-green-600":"text-red-600"}`,"svelte-bqtjkw"),b(Ve,r(A)?"Live":"Down"),b(We,a)},[()=>r(i).length>0?de(r(i)[0].timestamp):"None"]),D("click",Pe,Ie),d(y,F),pt()}export{Vt as component};
